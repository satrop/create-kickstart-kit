---
import "../../styles/demo.scss";

import Layout from "../../layouts/Layout.astro";
import DialogComponent from "../../components/Dialog/Dialog.astro";
import Button from "../../components/Button/Button.astro";
import FormField from "../../components/FormField/FormField.astro";
import Textarea from "../../components/Textarea/Textarea.astro";
import Select from "../../components/Select/Select.astro";
---

<Layout title="Dialog Component">
  <Fragment slot="main">
    <main id="main" class="layout-main" aria-label="Main content">
      <div class="component-demo">
        <header class="demo-header">
          <div class="section-grid">
            <div class="col-full">
              <nav class="demo-nav">
                <a href="./components.html" class="btn btn--outline btn--small">← Back to Components</a>
              </nav>
              <h1>Dialog Component</h1>
              <p class="demo-subtitle">
                Accessible modal dialogs with focus management, keyboard navigation, and multiple variants for different
                use cases.
              </p>
            </div>
          </div>
        </header>

        <section class="demo-section">
          <div class="section-grid">
            <div class="col-full">
              <h2>Basic Dialog</h2>
              <p>A simple dialog with title, content, and action buttons.</p>

              <div class="demo-example">
                <div class="demo-preview contain-floats">
                  <Button variant="primary" type="button" data-dialog-trigger="basic-dialog">
                    Open Basic Dialog
                  </Button>

                  <DialogComponent id="basic-dialog" title="Welcome to Our Platform" size="medium">
                    <p>
                      Thank you for joining our platform! We're excited to have you on board and can't wait to see what
                      you'll accomplish.
                    </p>
                    <p>
                      This dialog demonstrates the basic functionality with a title, content area, and action buttons.
                      It includes proper focus management and keyboard navigation.
                    </p>
                    <Fragment slot="actions">
                      <Button variant="secondary" type="button" data-dialog-close="basic-dialog"> Maybe Later </Button>
                      <Button variant="primary" type="button" data-dialog-close="basic-dialog"> Get Started </Button>
                    </Fragment>
                  </DialogComponent>
                </div>

                <div class="demo-code">
                  <pre><code>&lt;Button variant="primary" data-dialog-trigger="basic-dialog"&gt;
  Open Basic Dialog
&lt;/Button&gt;

&lt;DialogComponent
  id="basic-dialog"
  title="Welcome to Our Platform"
  size="medium"
&gt;
  &lt;p&gt;Thank you for joining our platform!&lt;/p&gt;
  &lt;Fragment slot="actions"&gt;
    &lt;Button variant="secondary" type="button" data-dialog-close="basic-dialog"&gt;
      Maybe Later
    &lt;/Button&gt;
    &lt;Button variant="primary" type="button" data-dialog-close="basic-dialog"&gt;
      Get Started
    &lt;/Button&gt;
  &lt;/Fragment&gt;
&lt;/DialogComponent&gt;</code></pre>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="demo-section">
          <div class="section-grid">
            <div class="col-full">
              <h2>Alert Dialog</h2>
              <p>Alert variant for important notifications and warnings.</p>

              <div class="demo-example">
                <div class="demo-preview contain-floats">
                  <Button variant="primary" type="button" data-dialog-trigger="alert-dialog">
                    Show Alert Dialog
                  </Button>

                  <DialogComponent id="alert-dialog" title="Important Notice" variant="alert" size="small">
                    <p>
                      <strong>Your session is about to expire.</strong>
                    </p>
                    <p>
                      To continue using the application, please save your work and refresh the page. Any unsaved changes
                      will be lost.
                    </p>
                    <Fragment slot="actions">
                      <Button variant="primary" type="button" data-dialog-close="alert-dialog"> I Understand </Button>
                    </Fragment>
                  </DialogComponent>
                </div>

                <div class="demo-code">
                  <pre><code>&lt;Button variant="primary" data-dialog-trigger="alert-dialog"&gt;
  Show Alert Dialog
&lt;/Button&gt;

&lt;DialogComponent
  id="alert-dialog"
  title="Important Notice"
  variant="alert"
  size="small"
&gt;
  &lt;p&gt;&lt;strong&gt;Your session is about to expire.&lt;/strong&gt;&lt;/p&gt;
  &lt;p&gt;To continue using the application...&lt;/p&gt;
  &lt;Fragment slot="actions"&gt;
    &lt;Button variant="primary" type="button" data-dialog-close="alert-dialog"&gt;
      I Understand
    &lt;/Button&gt;
  &lt;/Fragment&gt;
&lt;/DialogComponent&gt;</code></pre>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="demo-section">
          <div class="section-grid">
            <div class="col-full">
              <h2>Confirmation Dialog</h2>
              <p>Confirmation variant for destructive actions that need user approval.</p>

              <div class="demo-example">
                <div class="demo-preview contain-floats">
                  <Button variant="primary" type="button" data-dialog-trigger="confirmation-dialog">
                    Delete Account
                  </Button>

                  <DialogComponent id="confirmation-dialog" title="Delete Account" variant="confirmation" size="small">
                    <p>
                      <strong>Are you sure you want to delete your account?</strong>
                    </p>
                    <p>
                      This action cannot be undone. All your data, settings, and content will be permanently removed
                      from our servers.
                    </p>
                    <Fragment slot="actions">
                      <Button variant="outline" type="button" data-dialog-close="confirmation-dialog"> Cancel </Button>
                      <Button variant="primary" type="button" data-dialog-close="confirmation-dialog">
                        Delete Account
                      </Button>
                    </Fragment>
                  </DialogComponent>
                </div>

                <div class="demo-code">
                  <pre><code>&lt;Button variant="primary" data-dialog-trigger="confirmation-dialog"&gt;
  Delete Account
&lt;/Button&gt;

&lt;DialogComponent
  id="confirmation-dialog"
  title="Delete Account"
  variant="confirmation"
  size="small"
&gt;
  &lt;p&gt;&lt;strong&gt;Are you sure you want to delete your account?&lt;/strong&gt;&lt;/p&gt;
  &lt;p&gt;This action cannot be undone...&lt;/p&gt;
  &lt;Fragment slot="actions"&gt;
    &lt;Button variant="outline" type="button" data-dialog-close="confirmation-dialog"&gt;
      Cancel
    &lt;/Button&gt;
    &lt;Button variant="primary" type="button" data-dialog-close="confirmation-dialog"&gt;
      Delete Account
    &lt;/Button&gt;
  &lt;/Fragment&gt;
&lt;/DialogComponent&gt;</code></pre>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="demo-section">
          <div class="section-grid">
            <div class="col-full">
              <h2>Large Dialog</h2>
              <p>Large dialog for content-heavy interactions and forms.</p>

              <div class="demo-example">
                <div class="demo-preview contain-floats">
                  <Button variant="primary" type="button" data-dialog-trigger="large-dialog">
                    Open Large Dialog
                  </Button>

                  <DialogComponent id="large-dialog" title="Contact Information" size="large">
                    <div class="dialog-form-content">
                      <p>
                        Please fill out your contact information below. All fields marked with an asterisk (*) are
                        required.
                      </p>

                      <form class="dialog-form">
                        <div class="form-row">
                          <FormField
                            label="First Name"
                            name="firstName"
                            required={true}
                            placeholder="Your first name"
                          />
                          <FormField label="Last Name" name="lastName" required={true} placeholder="Your last name" />
                        </div>

                        <FormField
                          label="Email Address"
                          name="email"
                          type="email"
                          required={true}
                          placeholder="your.email@example.com"
                          helpText="We'll never share your email with anyone else."
                        />

                        <FormField label="Company" name="company" placeholder="Your organization" />

                        <Select
                          label="Inquiry Type"
                          name="inquiryType"
                          required={true}
                          options={[
                            { value: "support", label: "Technical Support" },
                            { value: "sales", label: "Sales Inquiry" },
                            { value: "feedback", label: "Feedback" },
                            { value: "other", label: "Other" },
                          ]}
                          placeholder="Select an inquiry type"
                        />

                        <Textarea
                          label="Message"
                          name="message"
                          required={true}
                          rows={4}
                          placeholder="Tell us how we can help you..."
                          helpText="Please be as specific as possible"
                        />
                      </form>
                    </div>

                    <Fragment slot="actions">
                      <Button variant="outline" type="button" data-dialog-close="large-dialog"> Cancel </Button>
                      <Button variant="primary" type="button" data-dialog-close="large-dialog"> Send Message </Button>
                    </Fragment>
                  </DialogComponent>
                </div>

                <div class="demo-code">
                  <pre><code>&lt;Button variant="primary" data-dialog-trigger="large-dialog"&gt;
  Open Large Dialog
&lt;/Button&gt;

&lt;DialogComponent
  id="large-dialog"
  title="Contact Information"
  size="large"
&gt;
  &lt;form class="dialog-form"&gt;
    &lt;FormField
      label="Email Address"
      name="email"
      type="email"
      required={true}
    /&gt;
    
    &lt;Textarea
      label="Message"
      name="message"
      required={true}
      placeholder="Tell us how we can help you..."
    /&gt;
    &lt;!-- More form fields... --&gt;
  &lt;/form&gt;
  
  &lt;Fragment slot="actions"&gt;
    &lt;Button variant="outline" type="button" data-dialog-close="large-dialog"&gt;
      Cancel
    &lt;/Button&gt;
    &lt;Button variant="primary" type="button" data-dialog-close="large-dialog"&gt;
      Send Message
    &lt;/Button&gt;
  &lt;/Fragment&gt;
&lt;/DialogComponent&gt;</code></pre>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="demo-section">
          <div class="section-grid">
            <div class="col-full">
              <h2>Dialog Without Close Button</h2>
              <p>Dialog that requires explicit user action to close.</p>

              <div class="demo-example">
                <div class="demo-preview contain-floats">
                  <Button variant="primary" type="button" data-dialog-trigger="no-close-dialog">
                    Open Required Action Dialog
                  </Button>

                  <DialogComponent
                    id="no-close-dialog"
                    title="Terms and Conditions"
                    size="medium"
                    showCloseButton={false}
                    closeOnOutsideClick={false}
                    closeOnEscape={false}>
                    <p>
                      Before you can continue, you must read and accept our terms and conditions. This dialog cannot be
                      closed without making a selection.
                    </p>
                    <div class="terms-content">
                      <h4>Key Terms:</h4>
                      <ul>
                        <li>You agree to use our service responsibly</li>
                        <li>Your data will be handled according to our privacy policy</li>
                        <li>Service availability is not guaranteed 100% of the time</li>
                        <li>You can cancel your account at any time</li>
                      </ul>
                    </div>

                    <Fragment slot="actions">
                      <Button variant="outline" type="button" data-dialog-close="no-close-dialog"> Decline </Button>
                      <Button variant="primary" type="button" data-dialog-close="no-close-dialog">
                        Accept Terms
                      </Button>
                    </Fragment>
                  </DialogComponent>
                </div>

                <div class="demo-code">
                  <pre><code>&lt;DialogComponent
  id="no-close-dialog"
  title="Terms and Conditions"
  size="medium"
  showCloseButton={false}
  closeOnOutsideClick={false}
  closeOnEscape={false}
&gt;
  &lt;p&gt;Before you can continue, you must read and accept...&lt;/p&gt;
  
  &lt;Fragment slot="actions"&gt;
    &lt;Button variant="outline" type="button" data-dialog-close="no-close-dialog"&gt;
      Decline
    &lt;/Button&gt;
    &lt;Button variant="primary" type="button" data-dialog-close="no-close-dialog"&gt;
      Accept Terms
    &lt;/Button&gt;
  &lt;/Fragment&gt;
&lt;/DialogComponent&gt;</code></pre>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="demo-section">
          <div class="section-grid">
            <div class="col-full">
              <h2>Props Reference</h2>

              <div class="props-table">
                <table>
                  <thead>
                    <tr>
                      <th>Prop</th>
                      <th>Type</th>
                      <th>Default</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>id</code></td>
                      <td><code>string</code></td>
                      <td>Required</td>
                      <td>Unique identifier for the dialog</td>
                    </tr>
                    <tr>
                      <td><code>title</code></td>
                      <td><code>string</code></td>
                      <td><code>undefined</code></td>
                      <td>Dialog title text</td>
                    </tr>
                    <tr>
                      <td><code>size</code></td>
                      <td><code>"small" | "medium" | "large" | "fullscreen"</code></td>
                      <td><code>"medium"</code></td>
                      <td>Dialog size variant</td>
                    </tr>
                    <tr>
                      <td><code>variant</code></td>
                      <td><code>"default" | "alert" | "confirmation"</code></td>
                      <td><code>"default"</code></td>
                      <td>Visual style variant</td>
                    </tr>
                    <tr>
                      <td><code>closeOnOutsideClick</code></td>
                      <td><code>boolean</code></td>
                      <td><code>true</code></td>
                      <td>Whether clicking outside closes the dialog</td>
                    </tr>
                    <tr>
                      <td><code>closeOnEscape</code></td>
                      <td><code>boolean</code></td>
                      <td><code>true</code></td>
                      <td>Whether pressing Escape closes the dialog</td>
                    </tr>
                    <tr>
                      <td><code>showCloseButton</code></td>
                      <td><code>boolean</code></td>
                      <td><code>true</code></td>
                      <td>Whether to show the close (X) button</td>
                    </tr>
                    <tr>
                      <td><code>class</code></td>
                      <td><code>string</code></td>
                      <td><code>undefined</code></td>
                      <td>Additional CSS classes</td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <h3>Slots</h3>
              <div class="props-table">
                <table>
                  <thead>
                    <tr>
                      <th>Slot</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>default</code></td>
                      <td>Main content area of the dialog</td>
                    </tr>
                    <tr>
                      <td><code>actions</code></td>
                      <td>Footer area for buttons and actions</td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <h3>Data Attributes</h3>
              <div class="props-table">
                <table>
                  <thead>
                    <tr>
                      <th>Attribute</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>data-dialog-trigger="[id]"</code></td>
                      <td>Add to button/element to open a dialog</td>
                    </tr>
                    <tr>
                      <td><code>type="button" data-dialog-close="[id]"</code></td>
                      <td>Add to button/element to close a dialog</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </section>

        <section class="demo-section">
          <div class="section-grid">
            <div class="col-full">
              <h2>Accessibility Features</h2>
              <p class="section-intro">Built-in accessibility support for inclusive user experiences.</p>
            </div>
          </div>

          <div class="section-grid">
            <div class="col-full">
              <div class="accessibility-grid">
                <div class="accessibility-item">
                  <h4>Keyboard Navigation</h4>
                  <ul>
                    <li><kbd>Tab</kbd> / <kbd>Shift+Tab</kbd> - Navigate within dialog</li>
                    <li><kbd>Escape</kbd> - Close dialog</li>
                    <li>Focus trapping within dialog content</li>
                    <li>Focus restoration on dialog close</li>
                  </ul>
                </div>

                <div class="accessibility-item">
                  <h4>Screen Reader Support</h4>
                  <ul>
                    <li>Proper <code>role="dialog"</code> and <code>aria-modal</code></li>
                    <li>Dialog labeled with <code>aria-labelledby</code></li>
                    <li>Background content marked as inert</li>
                    <li>Clear announcements on open/close</li>
                  </ul>
                </div>

                <div class="accessibility-item">
                  <h4>Visual Indicators</h4>
                  <ul>
                    <li>Clear focus indicators on all elements</li>
                    <li>Backdrop overlay shows modal context</li>
                    <li>Multiple close options available</li>
                    <li>Consistent button styling and placement</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="demo-section">
          <div class="section-grid">
            <div class="col-full">
              <h2>Design Guidelines</h2>
              <p class="section-intro">Best practices for using dialogs in your interface.</p>
            </div>
          </div>

          <div class="section-grid">
            <div class="col-full">
              <div class="guidelines-grid">
                <div class="guideline-item">
                  <h4>✅ Do</h4>
                  <ul>
                    <li>Use for critical actions and confirmations</li>
                    <li>Provide clear, descriptive titles</li>
                    <li>Keep content concise and focused</li>
                    <li>Include multiple ways to close</li>
                    <li>Use appropriate size for content</li>
                    <li>Test with keyboard navigation</li>
                  </ul>
                </div>

                <div class="guideline-item">
                  <h4>❌ Don't</h4>
                  <ul>
                    <li>Stack multiple dialogs at once</li>
                    <li>Use for non-critical information</li>
                    <li>Include complex navigation flows</li>
                    <li>Make dialogs the only way to access features</li>
                    <li>Use overly large dialogs for simple tasks</li>
                    <li>Forget to handle mobile constraints</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </Fragment>
</Layout>
