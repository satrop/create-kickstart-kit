---
import Layout from "@/layouts/Layout.astro";
import AccordionComponent from "@/components/Accordion/Accordion.astro";
import DemoNavigation from "../../components/DemoNavigation/DemoNavigation.astro";
import { getFormComponentNavigation } from "../../utils/demoNavigation";
import "@/styles/demo.scss";

const basicItems = [
  {
    id: "item1",
    title: "What is this component library?",
    content:
      "This is a comprehensive collection of accessible, customizable UI components built with Astro. Each component is designed with performance and accessibility in mind.",
  },
  {
    id: "item2",
    title: "How do I customize the components?",
    content:
      "Components use CSS custom properties and semantic class names for easy theming. You can override styles in your stylesheet or create new variant classes.",
  },
  {
    id: "item3",
    title: "Are the components accessible?",
    content:
      "Yes! All components follow WCAG guidelines and include proper ARIA attributes, semantic HTML, keyboard navigation support, and focus management.",
  },
];

const multipleItems = [
  {
    id: "multi1",
    title: "Section One",
    content: "This section can be open at the same time as others.",
  },
  {
    id: "multi2",
    title: "Section Two",
    content: "Multiple sections can be expanded simultaneously when allowMultiple is true.",
  },
];

const variantItems = {
  default: [
    { id: "default1", title: "Default Style", content: "This is the default accordion style with subtle styling." },
  ],
  bordered: [
    { id: "bordered1", title: "Bordered Style", content: "This accordion has visible borders around each section." },
  ],
  flush: [
    {
      id: "flush1",
      title: "Flush Style",
      content: "This accordion has minimal styling with no borders or backgrounds.",
    },
  ],
};

// Get navigation items with current page marked as active
const navigationItems = getFormComponentNavigation("accordion");
---

<Layout title="Accordion Component">
  <Fragment slot="main">
    <main id="main" class="layout-main" aria-label="Main content">
      <div class="section-grid owl-32">
        <DemoNavigation title="Form Components" items={navigationItems} />
        <div class="col-4 md:col-4 lg:col-9">
          <div class="component-demo">
            <header class="demo-header">
              <div class="section-grid">
                <div class="col-full">
                  <h1>Accordion Component</h1>
                  <p class="demo-subtitle">
                    Collapsible content sections for organizing information hierarchically with smooth animations and
                    full keyboard accessibility.
                  </p>
                </div>
              </div>
            </header>

            <section class="demo-section">
              <div class="section-grid">
                <div class="col-full">
                  <h2>Basic Accordion</h2>
                  <p>The default accordion allows only one section to be open at a time.</p>

                  <div class="demo-example">
                    <div class="demo-preview contain-floats">
                      <AccordionComponent items={basicItems} />
                    </div>

                    <div class="demo-code">
                      <pre><code>&lt;Accordion items={'{'}items{'}'} /&gt;

// Example items structure:
const items = [
  {'{'}
    id: "item1",
    title: "What is this component library?",
    content: "This is a comprehensive collection..."
  {'}'},
  // ... more items
];</code></pre>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="demo-section">
              <div class="section-grid">
                <div class="col-full">
                  <h2>Multiple Sections Open</h2>
                  <p>Use the <code>allowMultiple</code> prop to let users open multiple sections simultaneously.</p>

                  <div class="demo-example">
                    <div class="demo-preview contain-floats">
                      <AccordionComponent items={multipleItems} allowMultiple={true} />
                    </div>

                    <div class="demo-code">
                      <pre><code>&lt;Accordion items={'{'}items{'}'} allowMultiple={'{'}true{'}'} /&gt;</code></pre>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="demo-section">
              <div class="section-grid">
                <div class="col-full">
                  <h2>Accordion Variants</h2>
                  <p>Choose from different visual styles: default, bordered, or flush.</p>

                  <div class="demo-example">
                    <div class="demo-preview contain-floats">
                      <div class="variants-grid">
                        <div class="variant-demo">
                          <h4>Default</h4>
                          <AccordionComponent items={variantItems.default} variant="default" />
                        </div>

                        <div class="variant-demo">
                          <h4>Bordered</h4>
                          <AccordionComponent items={variantItems.bordered} variant="bordered" />
                        </div>

                        <div class="variant-demo">
                          <h4>Flush</h4>
                          <AccordionComponent items={variantItems.flush} variant="flush" />
                        </div>
                      </div>
                    </div>

                    <div class="demo-code">
                      <pre><code>&lt;Accordion items={'{'}items{'}'} variant="default" /&gt;
&lt;Accordion items={'{'}items{'}'} variant="bordered" /&gt;
&lt;Accordion items={'{'}items{'}'} variant="flush" /&gt;</code></pre>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="demo-section">
              <div class="section-grid">
                <div class="col-full">
                  <h2>Props Reference</h2>
                  <div class="props-table">
                    <table>
                      <thead>
                        <tr>
                          <th>Prop</th>
                          <th>Type</th>
                          <th>Default</th>
                          <th>Description</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td><code>items</code></td>
                          <td><code>AccordionItem[]</code></td>
                          <td>Required</td>
                          <td>Array of accordion items with id, title, and content</td>
                        </tr>
                        <tr>
                          <td><code>allowMultiple</code></td>
                          <td><code>boolean</code></td>
                          <td><code>false</code></td>
                          <td>Whether multiple sections can be open simultaneously</td>
                        </tr>
                        <tr>
                          <td><code>variant</code></td>
                          <td><code>"default" | "bordered" | "flush"</code></td>
                          <td><code>"default"</code></td>
                          <td>The visual style variant of the accordion</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <h3>AccordionItem Interface</h3>
                  <div class="props-table">
                    <table>
                      <thead>
                        <tr>
                          <th>Property</th>
                          <th>Type</th>
                          <th>Required</th>
                          <th>Description</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td><code>id</code></td>
                          <td><code>string</code></td>
                          <td>Yes</td>
                          <td>Unique identifier for the accordion item</td>
                        </tr>
                        <tr>
                          <td><code>title</code></td>
                          <td><code>string</code></td>
                          <td>Yes</td>
                          <td>The title text displayed in the accordion header</td>
                        </tr>
                        <tr>
                          <td><code>content</code></td>
                          <td><code>string</code></td>
                          <td>No</td>
                          <td>Plain text content for the accordion body</td>
                        </tr>
                        <tr>
                          <td><code>htmlContent</code></td>
                          <td><code>string</code></td>
                          <td>No</td>
                          <td>HTML string content for the accordion body</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </section>

            <section class="demo-section">
              <div class="section-grid">
                <div class="col-full">
                  <h2>Accessibility Features</h2>
                  <p class="section-intro">Built-in accessibility support for inclusive user experiences.</p>
                </div>
              </div>

              <div class="section-grid">
                <div class="col-full">
                  <div class="accessibility-grid">
                    <div class="accessibility-item">
                      <h4>Keyboard Navigation</h4>
                      <ul>
                        <li><kbd>Tab</kbd> - Move between accordion headers</li>
                        <li><kbd>Enter</kbd> / <kbd>Space</kbd> - Toggle section</li>
                        <li><kbd>Arrow Keys</kbd> - Navigate between headers</li>
                      </ul>
                    </div>

                    <div class="accessibility-item">
                      <h4>Screen Reader Support</h4>
                      <ul>
                        <li>Proper heading hierarchy with <code>h3</code> elements</li>
                        <li>State changes announced with <code>aria-expanded</code></li>
                        <li>Content linked with <code>aria-controls</code></li>
                        <li>Headers labeled with <code>aria-labelledby</code></li>
                      </ul>
                    </div>

                    <div class="accessibility-item">
                      <h4>Visual Indicators</h4>
                      <ul>
                        <li>Clear focus indicators on headers</li>
                        <li>Expanded/collapsed state icons</li>
                        <li>Smooth animations with motion preferences</li>
                        <li>Consistent visual hierarchy</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="demo-section">
              <div class="section-grid">
                <div class="col-full">
                  <h2>Design Guidelines</h2>
                  <p class="section-intro">Best practices for using accordions in your interface.</p>
                </div>
              </div>

              <div class="section-grid">
                <div class="col-full">
                  <div class="guidelines-grid">
                    <div class="guideline-item">
                      <h4>✅ Do</h4>
                      <ul>
                        <li>Use for organizing related content sections</li>
                        <li>Provide descriptive, scannable header titles</li>
                        <li>Keep content within sections focused</li>
                        <li>Consider logical information order</li>
                        <li>Use consistent content formatting</li>
                      </ul>
                    </div>

                    <div class="guideline-item">
                      <h4>❌ Don't</h4>
                      <ul>
                        <li>Nest accordions more than one level deep</li>
                        <li>Hide critical information users expect to see</li>
                        <li>Use overly long titles that wrap awkwardly</li>
                        <li>Mix different content types inconsistently</li>
                        <li>Auto-expand sections without user action</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </main>
  </Fragment>
</Layout>
