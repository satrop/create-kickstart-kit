---
export interface Props {
  imagePosition?: "left" | "right";
  imageAlt: string;
  imageSrc: string;
  title: string;
  subtitle?: string;
  alignment?: "left" | "center";
  variant?: "default" | "contained" | "full-bleed";
}

const {
  imagePosition = "left",
  imageAlt,
  imageSrc,
  title,
  subtitle,
  alignment = "left",
  variant = "default",
} = Astro.props;

const contentOrder = imagePosition === "left" ? "order-2" : "order-1";
const imageOrder = imagePosition === "left" ? "order-1" : "order-2";
---

<section class={`fifty-fifty fifty-fifty--${variant}`}>
  <div class="section-grid">
    <div class={`col-4 md:col-4 lg:col-6 fifty-fifty__image ${imageOrder}`}>
      <div class="fifty-fifty__image-wrapper">
        <img src={imageSrc} alt={imageAlt} class="fifty-fifty__img" />
      </div>
    </div>

    <div class={`col-4 md:col-4 lg:col-6 fifty-fifty__content fifty-fifty__content--${alignment} ${contentOrder}`}>
      <div class="fifty-fifty__content-wrapper">
        {subtitle && <p class="fifty-fifty__subtitle">{subtitle}</p>}
        <h2 class="fifty-fifty__title">{title}</h2>
        <div class="fifty-fifty__body">
          <slot />
        </div>
        {
          Astro.slots.has("actions") && (
            <div class="fifty-fifty__actions">
              <slot name="actions" />
            </div>
          )
        }
      </div>
    </div>
  </div>
</section>

<style>
  .fifty-fifty {
    margin-bottom: 2rem;
  }

  .fifty-fifty--contained {
    padding: 2rem 0;
  }

  .fifty-fifty--full-bleed {
    margin-left: calc(-50vw + 50%);
    margin-right: calc(-50vw + 50%);
  }

  .fifty-fifty__image {
    display: flex;
    align-items: center;
  }

  .fifty-fifty__image-wrapper {
    width: 100%;
    height: 100%;
    min-height: 300px;
    position: relative;
    overflow: hidden;
    border-radius: 8px;
  }

  .fifty-fifty__img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .fifty-fifty__content {
    display: flex;
    align-items: center;
    padding: 1rem;
  }

  .fifty-fifty__content-wrapper {
    width: 100%;
    max-width: 500px;
  }

  .fifty-fifty__content--left .fifty-fifty__content-wrapper {
    margin-left: 0;
    margin-right: auto;
  }

  .fifty-fifty__content--center .fifty-fifty__content-wrapper {
    margin-left: auto;
    margin-right: auto;
    text-align: center;
  }

  .fifty-fifty__subtitle {
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #007bff;
    margin: 0 0 0.5rem 0;
  }

  .fifty-fifty__title {
    font-size: 2rem;
    font-weight: 700;
    line-height: 1.2;
    color: #333;
    margin: 0 0 1rem 0;
  }

  .fifty-fifty__body {
    font-size: 1.125rem;
    line-height: 1.6;
    color: #666;
    margin-bottom: 1.5rem;
  }

  .fifty-fifty__body p {
    margin: 0 0 1rem 0;
  }

  .fifty-fifty__body p:last-child {
    margin-bottom: 0;
  }

  .fifty-fifty__actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .fifty-fifty__content--center .fifty-fifty__actions {
    justify-content: center;
  }

  /* Responsive adjustments */
  @media (max-width: 767px) {
    .fifty-fifty__content {
      padding: 1.5rem 0 0 0;
    }

    .fifty-fifty__title {
      font-size: 1.75rem;
    }

    .fifty-fifty__body {
      font-size: 1rem;
    }

    .fifty-fifty__image-wrapper {
      min-height: 250px;
    }
  }

  @media (min-width: 768px) {
    .fifty-fifty__content {
      padding: 2rem;
    }

    .fifty-fifty__image-wrapper {
      min-height: 400px;
    }
  }

  @media (min-width: 1024px) {
    .fifty-fifty__title {
      font-size: 2.5rem;
    }

    .fifty-fifty__image-wrapper {
      min-height: 450px;
    }
  }

  /* Order utilities for responsive reordering */
  .order-1 {
    order: 1;
  }
  .order-2 {
    order: 2;
  }

  @media (max-width: 1023px) {
    /* On mobile and tablet, always show image first, content second */
    .fifty-fifty__image {
      order: 1 !important;
    }

    .fifty-fifty__content {
      order: 2 !important;
    }
  }
</style>
